<!doctype html>

<html lang="en">
  <head>
    <title>Turbine Power Calculator</title>

    <!-- Include the jQuery library-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Include Bootstrap-->
		<link rel="stylesheet"
		href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous">
    
    <!-- CSS Code -->
    <style type="text/CSS">	
			/* quote div positioned and styled */
      .titlebar{
        float: left;
        width: 100%;
				height: 100px;
				padding: 20px;
				margin: 0px 20px 0px 0px;
        /*background-color: black;*/
				color: black;
				text-align: center;}
      
      .instructions{
        float: left;
        width: 100%;
				height: 100px;
				padding: 20px;
				margin: 0px 20px 0px 0px;
        /*background-color: blue;*/
				color: silver;
				text-align: center;}

			body{
        background-color: rgb(90, 102, 209);}

      .row1{
        clear: left;
				float: left;
				width: 100%;
				height: 100px;
				padding: 20px;
				margin: 0px 20px 0px 0px;
        /*background-color: green;*/
				color: #f40b03;
				text-align: center;}

      .row2{
				width: 100%;
				height: 100px;
				padding: 20px;
				margin: 0px 20px 0px 0px;
        /*background-color: blue;*/
				color: #f40b03;
				text-align: center;}

    </style>
  </head>

  <body> 
    <h1 class="titlebar">Turbine Power Calculator</h1>
    
      <h2 class="instructions">Enter the expected wind speed and click Predict Power</h2>

      <div class="row1">
        <input type="text" style="height:60px; width:200px" id="input" name="windspeed" placeholder="Wind Speed" required="required">
        <input type="text" style="height:60px; width:200px"  id="output" placeholder="Predicted power here.." readonly>
      </div>
      <div class="row2">
        <button type="button" class="button" id="predict-button" onclick="prediction()">Predict Power</button>
      </div>

    <script>
        // Adapted from stack overflow posts.
        $("#predict-button").click(function(e) {
            e.preventDefault();
            $.getJSON("/api/predict", function(data) {
                $('#output').val(data.value);
            });
        });

        function prediction(){
          speed = document.getElementById("input").value
          console.log(speed)

          $.ajax({
            "url":"http://127.0.0.1:5000/api/predict/"+speed,
            "method": "GET",
            "data": "",
            "dataType": "JSON",
            "success":function(result){
                      console.log(result)
            },
            "error":function(xhr, status, error){
                			console.log("error:"+status+" msg: "+error)
            }
          });

        }

          


    </script>
  </body>
</html>